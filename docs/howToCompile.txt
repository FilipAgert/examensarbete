first create .o file linking library 
fsparselib. gfortran -c  testArpack.f90 -I ../build/dependencies/fsparse/src
then link larpack: gfortran -o testArpack testArpack.o -larpack ../build/dependencies/fsparse/fsparselib.a

compile one file: gfortran https://fortran-lang.org/learn/building_programs/managing_libraries/
gfortran -c to create .o file.

Recompile fsparse: 
cd ../build/dependencies/fsparse/src
gfortran -O3 -c matvec/fsparse_matvec.f90 -fopenmp
cd ..
ar r fsparselibpar.a src/fsparse_cells2sparse.o src/fsparse_constants.o src/fsparse_matrix_gallery.o src/fsparse_matvec.o src/fsparse_sort.o src/fsparse.o
cd ../../../test
gfortran -O3 -c testParMat.f90 -I../build/dependencies/fsparse/src
gfortran -O3 -o testParMat testParMat.o ../build/dependencies/fsparse/fsparselibpar.a -fopenmp


Recompile main:
gfortran -O3 -c ../src/solverBase.f90 -o ../src/solverBase.o -I../src -I../build/dependencies/fsparse/src
gfortran -O3 -c ../src/sparseFromPotSurf.f90 -o ../src/sparseFromPotSurf.o -I../src -I../build/dependencies/fsparse/src
gfortran -O3 -c ../app/main.f90 -o ../app/main.o -I../src -I../build/dependencies/fsparse/src
gfortran -O3 -o main ../app/main.o ../src/dlap.o ../src/potsurf.o ../src/sparseFromPotSurf.o ../src/sparseMatrix.o ../src/mgmres.o ../src/denseMatrix.o ../src/linearInterpolation.o ../src/markovSparse.o ../src/result_module.o ../src/solverBase.o ../build/dependencies/fsparse/fsparselib.a -larpack -O3


testParMat:
gfortran -O3 -c testParMat.f90 -I../src -I../build/dependencies/fsparse/src -fopenmp
gfortran -O3 -o testParMat testParMat.o ../build/dependencies/fsparse/fsparselib.a ../src/sparseFromPotSurf.o ../src/potsurf.o -fopenmp

new main:
gfortran -O3 -o ../src/result_module.o -c ../src/result_module.f90 -I../build/dependencies/fsparse/src -I../src -fopenmp 
gfortran -O3 -o ../src/potsurf.o -c ../src/potsurf.f90
gfortran -O3 -o ../src/sparseMatrix.o -c ../src/sparseMatrix.f90 -I../build/dependencies/fsparse/src -I../src -fopenmp 
gfortran -O3 -o ../src/markovSolver.o -c ../src/markovSolver.f90 -I../build/dependencies/fsparse/src -I../src -fopenmp 
gfortran -O3 -o ../src/denseMatrix.o -c ../src/denseMatrix.f90 -I../build/dependencies/fsparse/src -I../src -fopenmp 
gfortran -O3 -o ../app/main2.o -c ../app/main2.f90 -I../build/dependencies/fsparse/src -I../src -fopenmp 
gfortran -O3 -o ../app/main2.exe ../app/main2.o ../src/markovSolver.o ../src/potsurf.o ../src/result_module.o ../src/sparseMatrix.o ../build/dependencies/fsparse/fsparselibpar.a -larpack -fopenmp

on @e121:
gfortran -O3 -o ../src/result_module.o -c ../src/result_module.f90 -I../src -fopenmp 
gfortran -O3 -o ../src/sparse.o -c ../src/sparse.f90 -I../src -fopenmp
gfortran -O3 -o ../src/potsurf.o -c ../src/potsurf.f90
gfortran -O3 -o ../src/sparseMatrix.o -c ../src/sparseMatrix.f90 -I../src -fopenmp 
gfortran -O3 -o ../src/markovSolver.o -c ../src/markovSolver.f90 -I../src -fopenmp 
gfortran -O3 -o ../src/denseMatrix.o -c ../src/denseMatrix.f90 -I../src -fopenmp 
gfortran -O3 -o ../app/main2.o -c ../app/main2.f90 -I../src -fopenmp 
gfortran -O3 -o ../app/main2.exe ../app/main2.o ../src/markovSolver.o ../src/potsurf.o ../src/result_module.o ../src/sparseMatrix.o ../src/sparse.o -L/export/filipa/lib/arpack-ng/build/lib -larpack -fopenmp


with sparse:
gfortran -O3 -o ../src/result_module.o -c ../src/result_module.f90 -I../src -fopenmp 
gfortran -O3 -o ../src/sparse.o -c ../src/sparse.f90 -I../src -fopenmp
gfortran -O3 -o ../src/potsurf.o -c ../src/potsurf.f90
gfortran -O3 -o ../src/sparseMatrix.o -c ../src/sparseMatrix.f90 -I../src -fopenmp 
gfortran -O3 -o ../src/markovSolver.o -c ../src/markovSolver.f90 -I../src -fopenmp 
gfortran -O3 -o ../app/main2.o -c ../app/main2.f90 -I../src -fopenmp 
gfortran -O3 -o ../app/main2.exe ../app/main2.o ../src/markovSolver.o ../src/potsurf.o ../src/result_module.o ../src/sparseMatrix.o ../src/sparse.o -L/export/filipa/lib/arpack-ng/build/lib -larpack -fopenmp

Run:
export LD_LIBRARY_PATH=/export/filipa/lib/arpack-ng/build/lib:$LD_LIBRARY_PATH
nohup nice -n 19 ./main2.exe | tee output.txt

Copy:
scp -J filipa@merlot.matfys.lth.se filipa@e121.matfys.lth.se

